void function(a,b){"use strict";b.extend({arrClone:function(a){return a.slice(0)},arrDelete:function(a,b){return a.splice(b,1)},arrIndex:function(a,b){return this.inArray(b,a)},arrUnique:function(a){var e,d,b={},c=[];for(d=0;null!=(e=a[d]);d++)b[e]||""==a[d]||(c.push(e),b[e]=!0);return c},arrDelContain:function(a){var b=this,c=this.arrClone(a);return b.each(c,function(c,d){b.each(a,function(c,e){d!=e&&d.indexOf(e)>-1&&b.arrDelete(a,c)})}),a}}),b.fn.typeahead=function(c){var e,f,k,d=b(this),g=!0,h=c.currentLiactiveClass||"hover",i="",j={};d.after('<div class="typeahead"><div class="tip color">\u4e5f\u53ef\u6309\u0054\u0061\u0062\u6216\u2193\u952e\u9009\u62e9</div><div class="list"></div></div>'),k=d.siblings(".typeahead"),b.fn.typeahead.getDataContainer=function(){return k},b.fn.typeahead.dataRender=function(a){var g,h,i,c=a["suggests"],d=a["query"],e="";""!=d&&(g=d.split(/\s/g),g=b.arrUnique(g),g=b.arrDelContain(g)),b(c).each(function(a,c){var d=c;g.length&&b(g).each(function(a,b){h=new RegExp(b,"g"),c=c.replace(h,"<b>"+b+"</b>")}),e+='<li data-key="'+d+'">'+c+"</li>"}),a["links"]&&(i=a["links"]["link"],e='<li data-key="'+i["title"]+'"><p link="'+i["href"]+'" title="'+i["title"]+'\uff08\u5b98\u65b9\uff09"><img src="'+i["ico"]+'"><b>'+i["title"]+"</b><span>"+i["host"]+"</span></p></li>"+e),j[d]=e,f.showDiv(e)},f={init:function(){this.resetPositon()},listen:function(){var c=this;k.on("click.select","li",this.selectLiOnClick),d.hover(function(){c.bodyClick(0)},function(){c.bodyClick(1)}),k.hover(function(){d.off("blur")},function(){d.off("blur").on("blur",c.inputOnBlur)}),d.on("blur",this.inputOnBlur),d.on("click focus",this.inputOnClickOnFocus),d.on("keydown",this.inputOnKeydown),b(a).on("resize",this.resetPositon)},showDiv:function(a){""!==a&&k.find("div.list").html("<ul>"+a+"</ul>"),g&&k.show().find("div.tip").slideDown(2e3,function(){b(this).removeClass("color")})},bodyClick:function(a){var c="click.typeahead";a?b("body").off(c).on(c,this.inputOnBlur):b("body").off(c)},resetPositon:function(){k.css({left:d.offset().left,top:d.offset().top+d.outerHeight()-0,width:d.outerWidth()-2})},windowOnResize:function(){this.resetPositon()},selectLiOnClick:function(a){var e,f;d.val(b(a.target).closest("li").data("key")),b(a.target).closest("li").addClass(h).siblings("li").removeClass(h),k.hide(),b(a.target).closest("li").find("p").size()?(e=b(a.target).closest("li").find("p"),f=b("form"),f.attr({action:e.attr("link"),method:"GET",target:"_blank"}),f[0].submit()):c.selectCallback&&c.selectCallback()},inputOnBlur:function(){k.hide(),g=!1},inputOnClickOnFocus:function(){g=!0,""!==k.find("div.list").text()&&k.show()},inputOnKeydown:function(a){var b=k.find("li"),l=k.find("li."+h),m=function(){l.removeClass(h),d.val(d.data("val"))};return 13===a.keyCode?(k.hide(),g=!1,l.trigger("click.select"),void 0):!b.size()||l.size()||38!==a.keyCode&&40!==a.keyCode&&9!==a.keyCode?(38===a.keyCode?(a.preventDefault(),0!==b.index(l)?d.val(l.removeClass(h).prev().addClass(h).data("key")):m(),i=d.val()):40===a.keyCode||9===a.keyCode?(a.preventDefault(),b.index(l)!==b.size()-1?d.val(l.removeClass(h).next().addClass(h).data("key")):m(),i=d.val()):c.ajax&&(clearTimeout(e),setTimeout(function(){return j[d.val()]?(f.showDiv(j[d.val()]),void 0):(e=setTimeout(function(){i!==d.val()&&(i=d.val(),d.data("val",i),l.removeClass(h),c.ajax())},700),void 0)},0)),void 0):(a.preventDefault(),38===a.keyCode?d.val(b.last().addClass(h).data("key")):(40===a.keyCode||9===a.keyCode)&&d.val(b.first().addClass(h).data("key")),i=d.val(),void 0)}},k.size()>0&&(f.init(),f.listen())}}(window,jQuery),void function(a,b){"use strict";b(function(){var s,c=a.document,d=c.location.protocol+"//",e="baidu.com.cn/",f="google.com/",g=["s",".","p"],h=b("input.text"),i=b("select"),j=b("input:submit"),k=b("a.btn"),l=b("iframe"),m=b("div.body"),n="disabled",o="loading",p="",q=0,r=a.screen.availHeight;s=function(){this.init(),this.listen()},s.prototype={constructor:s,init:function(){var a=this;h.typeahead({selectCallback:function(){j.trigger("click")},ajax:function(){var c=b.fn.typeahead,d=encodeURI(h.val());""!==b.trim(h.val())?(c.getDataContainer().addClass(o),c.getDataContainer().is(":hidden")&&h.addClass(o),b.post(a.getPath()+"demo/search2/",{str:d},function(a){var b=a;c.dataRender(JSON.parse(b)),h.removeClass(o),c.getDataContainer().removeClass(o)})):h.val("")}}),m.css({height:r,"line-height":r-.15*r+"px"}).slideDown(1200,function(){h.focus()}),l.height(r+46),this.initSelect()},getPath:function(){return c.location.host.indexOf(".com")>-1?"/":"/0.NeuSofts/"},getSource:function(){return d+e.split("i")[0]+"i"+f.split(".")[0]+e.split("i")[1]+g.join("")+"hp"},selectOnChange:function(){j.trigger("click"),q=0},submitOnClick:function(){var c=b.trim(h.val());return h.val(c),""===c?(a.alert("\u8bf7\u8f93\u5165 Google/Baidu \u641c\u7d22\u5173\u952e\u8bcd"),h.focus()):(k.eq(0).addClass(n),k.eq(1).removeClass(n),p=this.getSource()+"?q="+c+"&num="+parseInt(i.val()),m.slideUp(1200,function(){h.blur(),l.attr("src",p)})),this.initSelect(),""!==c&&this.showPageNum(1),b(a).trigger("resize"),!1},documentOnKeyup:function(a){13===a.keyCode&&j.trigger("click")},initSelect:function(){i.data("init")?i.find("option").each(function(){b(this).text(b(this).data("val"))}):(i.find("option").each(function(){b(this).data("val",b(this).text())}),i.data("init",!0))},showPageNum:function(a){var b=parseInt(i.val()),c=i.find("option:selected");a=a||q/b+1,c.text(c.data("val")+" (\u7b2c"+a+"\u9875)")},btns0OnClick:function(a){b(a.target).hasClass(n)||(q-=parseInt(i.val()),l.attr("src",p+"&start="+q),b(a.target)[q>0?"removeClass":"addClass"](n),this.showPageNum())},btns1OnClick:function(a){b(a.target).hasClass(n)||(q+=parseInt(i.val()),l.attr("src",p+"&start="+q),k.eq(0).removeClass(n),this.showPageNum())},btns2OnClick:function(){var b=a.top.location.href;try{a.external.AddFavorite(b,c.title)}catch(d){a.prompt("\u975e\u0049\u0045\u6d4f\u89c8\u5668\uff0c\u8bf7\u590d\u5236\u4ee5\u4e0b\u0055\u0052\u004c\u81f3\u60a8\u7684\u6d4f\u89c8\u5668\u6536\u85cf\u5939\uff1a",b)}},listen:function(){i.on("change",b.proxy(this.selectOnChange,this)),j.on("click",b.proxy(this.submitOnClick,this)),b(c).on("keyup",this.documentOnKeyup),k.eq(0).on("click",b.proxy(this.btns0OnClick,this)),k.eq(1).on("click",b.proxy(this.btns1OnClick,this)),k.eq(2).on("click",this.btns2OnClick)}},new s})}(window,jQuery);